<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GitHub Repository Analyzer</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body {
margin: 0;
font-family: Arial, Helvetica, sans-serif;
background-color: #fff;
}

/* === Layout === */
.heading {
font-size: 2.2rem;
color: #000;
margin-top: 1rem;
}

hr {
background: transparent;
height: 2px;
border: 1px solid #000 inset;
width: 80%;
}

main {
margin: 1rem auto;
width: 80%;
text-align: center;
padding: 1rem 2rem;
border-radius: 12px;
box-shadow: 0 0 10px rgba(0,0,0,0.1);
background-color: #fff;
}

/* === Buttons === */
button {
padding: 0.6rem 1rem;
border-radius: 8px;
cursor: pointer;
margin-top: 4px;
background: #04be6d;
color: #fff;
border: none;
transition: all 0.3s ease;
}
button:hover {
background: transparent;
color: #04be6d;
border: 2px solid #04be6d;
}

/* === Analyzer Styles === */
.container {margin-top:1.5rem;}
.subtitle {color:#333;text-align:center;}
.input-group {display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
.input-group input {
padding:10px;border:2px solid #ccc;border-radius:10px;width:60%;font-size:14px;
}
.btn-primary {background:#04be6d;color:#fff;transition:all 0.3s ease;}
.btn-primary:hover {background:transparent;color:#04be6d;border:2px solid #04be6d;}
.error {
display:none; background:#ffe3e3; color:#c92a2a;
padding:10px; margin-top:15px; border-radius:10px; text-align:center;
}
.loading {display:none;margin-top:20px;text-align:center;}
.spinner {
border:4px solid #f3f3f3;
border-top:4px solid #04be6d;
border-radius:50%;
width:30px;height:30px;
animation:spin 1s linear infinite; margin:0 auto 10px;
}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.result-section {margin-top:25px;}
.result-section h2 {
color:#000;
border-bottom:2px solid #04be6d;
padding-bottom:5px;
}
.tech-badge {
display:inline-block;
background:rgba(4,190,109,0.1);
color:#000;
border:1px solid #04be6d;
border-radius:8px;
padding:5px 10px; margin:3px; font-size:0.85rem;
}
.stat-card {
display:inline-block;
background:#fff;
padding:10px 15px;
border-radius:10px;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
margin:8px; font-size:0.9rem;
}
.stat-value { font-size:1.1rem; font-weight:bold; color:#04be6d; }
.file-item {font-family:monospace;}
#aiAnalysis {text-align: justify;}
</style>
</head>

<body>
<main>
<section id="intro">
<h1 class="heading">üîç GitHub Repository Analyzer</h1>
<p class="subtitle">Analyze a GitHub repository and get a structured summary</p>
<hr>
</section>

<section id="content">
<div class="container">
<div class="input-section">
<div class="input-group">
<input type="text" id="repoUrl" placeholder="https://github.com/username/repository">
<button class="btn btn-primary" onclick="analyzeRepo()">Analyze</button>
</div>
<small style="color:#666;">Example: https://github.com/facebook/react</small>
</div>

<div class="error" id="error"></div>

<div class="loading" id="loading">
<div class="spinner"></div>
<p>Analyzing repository...</p>
<small>This may take a few seconds</small>
</div>

<div class="results" id="results" style="display:none;">
<div class="result-section"><h2>üìä Repository Information</h2><div id="repoInfo"></div></div>
<div class="result-section"><h2>üí° Description</h2><div class="description" id="description"></div></div>
<div class="result-section"><h2>ü§ñ AI Project Analysis</h2><div class="description" id="aiAnalysis" style="display:none;"></div></div>
<div class="result-section"><h2>üõ†Ô∏è Technologies Used</h2><div class="tech-stack" id="techStack"></div></div>
<div class="result-section"><h2>üìÅ File Structure</h2><div class="file-tree" id="fileTree"></div></div>
<div class="result-section"><h2>üìà Statistics</h2><div class="stats" id="stats"></div></div>
</div>
</div>
</section>
</main>

<script>
function showError(msg){
const e=document.getElementById('error');
e.textContent=msg;e.style.display='block';
setTimeout(()=>e.style.display='none',5000);
}

function parseGitHubUrl(url){
const regex=/github\\.com\\/([^\\/]+)\\/([^\\/]+)/;
const match=url.match(regex);
if(!match) throw new Error('Invalid GitHub URL');
return {owner:match[1],repo:match[2].replace('.git','')};
}

function detectTechnologies(files,languages){
const techs=new Set();
if(languages){Object.keys(languages).forEach(l=>techs.add(l));}
const techMap={
'package.json':['Node.js','npm'],
'requirements.txt':['Python'],
'Gemfile':['Ruby'],
'pom.xml':['Java'],
'build.gradle':['Gradle'],
'go.mod':['Go'],
'composer.json':['PHP'],
'Dockerfile':['Docker'],
'.github/workflows':['GitHub Actions'],
'webpack.config.js':['Webpack'],
'vite.config.js':['Vite'],
'tsconfig.json':['TypeScript'],
'angular.json':['Angular'],
'next.config.js':['Next.js'],
'vue.config.js':['Vue.js']
};
files.forEach(f=>{
Object.keys(techMap).forEach(k=>{
if(f.path.includes(k)){techMap[k].forEach(t=>techs.add(t));}
});
});
return Array.from(techs);
}

function buildFileTree(files){
const max=50;const tree={};
files.slice(0,max).forEach(f=>{
const parts=f.path.split('/');
let cur=tree;
parts.forEach((p,i)=>{
if(!cur[p]) cur[p]=i===parts.length-1?null:{};
cur=cur[p];
});
});
function render(o,prefix=''){
let html='';
Object.keys(o).forEach(k=>{
const isFolder=o[k]!==null;
const icon=isFolder?'üìÅ':'üìÑ';
html+=`<div class="file-item">${prefix}${icon} ${k}</div>`;
if(isFolder){html+=render(o[k],prefix+' ');}
});
return html;
}
return render(tree);
}

async function analyzeRepo(){
const url=document.getElementById('repoUrl').value.trim();
if(!url){showError('Please enter a GitHub URL');return;}
try{
const {owner,repo}=parseGitHubUrl(url);
document.getElementById('loading').style.display='block';
document.getElementById('results').style.display='none';
document.getElementById('error').style.display='none';

const repoResponse=await fetch(`https://api.github.com/repos/${owner}/${repo}`);
if(!repoResponse.ok) throw new Error('Repository not found');
const repoData=await repoResponse.json();

const treeResponse=await fetch(`https://api.github.com/repos/${owner}/${repo}/git/trees/${repoData.default_branch}?recursive=1`);
const treeData=await treeResponse.json();

const langResponse=await fetch(`https://api.github.com/repos/${owner}/${repo}/languages`);
const languages=await langResponse.json();

let readmeContent='';
try{
const readmeResponse=await fetch(`https://api.github.com/repos/${owner}/${repo}/readme`);
const readmeData=await readmeResponse.json();
readmeContent=atob(readmeData.content);
}catch(e){readmeContent='No README available';}

displayResults(repoData,treeData.tree,languages,readmeContent);
analyzeWithAI(repoData,treeData.tree,readmeContent,owner,repo);
}
catch(err){
showError('Error: '+err.message);
}finally{
document.getElementById('loading').style.display='none';
}
}

function displayResults(repo,files,languages,readme){
document.getElementById('repoInfo').innerHTML=`
<h3>${repo.full_name}</h3>
<p>${repo.description||'No description available'}</p>
<p><strong>‚≠ê Stars:</strong> ${repo.stargazers_count} | <strong>üç¥ Forks:</strong> ${repo.forks_count}</p>
<p><strong>üîó URL:</strong> <a href="${repo.html_url}" target="_blank">${repo.html_url}</a></p>`;
const description=readme.split('\\n').slice(0,10).join('\\n').substring(0,500);
document.getElementById('description').innerHTML=`<p>${description.replace(/[#*`]/g,'')}${readme.length>500?'...':''}</p>`;
const techs=detectTechnologies(files,languages);
document.getElementById('techStack').innerHTML=techs.map(t=>`<span class="tech-badge">${t}</span>`).join('');
document.getElementById('fileTree').innerHTML=buildFileTree(files);
const stats=[
{label:'Total Files',value:files.length},
{label:'Languages',value:Object.keys(languages).length},
{label:'Size',value:`${(repo.size/1024).toFixed(1)} MB`},
{label:'Created in',value:new Date(repo.created_at).getFullYear()}
];
document.getElementById('stats').innerHTML=stats.map(s=>`<div class="stat-card"><div class="stat-value">${s.value}</div><div>${s.label}</div></div>`).join('');
document.getElementById('results').style.display='block';
}

document.getElementById('repoUrl').addEventListener('keypress',e=>{if(e.key==='Enter')analyzeRepo();});

/* === AI analysis === */
async function analyzeWithAI(repoData,files,readme,owner,repo){
const aiDiv=document.getElementById('aiAnalysis');
aiDiv.style.display='block';
const apikey=localStorage.getItem("openaikey");
if(!apikey){
aiDiv.innerHTML=`<div style="text-align:center;padding:20px;color:#555;background:#f9f9f9;border-radius:8px;">Add your OpenAI API Key in localStorage ('openaikey')</div>`;
return;
}
try{
const fileList=files.slice(0,100).map(f=>f.path).join('\\n');
const prompt=\`Analyze this GitHub repository in detail:
Repository name: \${repoData.full_name}
Description: \${repoData.description||'N/A'}
README (first 2000 chars): \${readme.substring(0,2000)}
FILE STRUCTURE:
\${fileList}
Provide a concise analysis covering purpose, type, users, features, stack, and use cases.\`;

const response=await fetch('https://api.openai.com/v1/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':\`Bearer \${apikey}\`},
body:JSON.stringify({
model:'gpt-4o-mini',
messages:[
{role:'system',content:'You are a software analyst who explains GitHub projects clearly and concisely.'},
{role:'user',content:prompt}
],
max_tokens:1000,temperature:0.7
})
});
if(!response.ok){
const err=await response.json();
throw new Error(err.error?.message||'API Error');
}
const data=await response.json();
const analysis=data.choices[0].message.content;
aiDiv.innerHTML=analysis.replace(/\\*\\*(.+?)\\*\\*/g,'<strong>$1</strong>').replace(/\\n/g,'<br>');
}catch(err){
aiDiv.innerHTML=\`<div style="color:#c92a2a;padding:10px;background:#ffe3e3;border-radius:8px;">AI Analysis Error: \${err.message}</div>\`;
}
}
</script>
</body>
</html>
